"use strict";
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.getAnalyticsConfig = void 0;
const analytics_1 = require("../plugins/analytics");
function getAnalyticsConfig(wco, context) {
    if (!context.analytics) {
        return {};
    }
    // If there's analytics, add our plugin. Otherwise no need to slow down the build.
    let category = 'build';
    if (context.builder) {
        // We already vetted that this is a "safe" package, otherwise the analytics would be noop.
        category = context.builder.builderName.split(':')[1] || context.builder.builderName || 'build';
    }
    // The category is the builder name if it's an angular builder.
    return {
        plugins: [new analytics_1.NgBuildAnalyticsPlugin(wco.projectRoot, context.analytics, category)],
    };
}
exports.getAnalyticsConfig = getAnalyticsConfig;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5hbHl0aWNzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvYW5ndWxhcl9kZXZraXQvYnVpbGRfYW5ndWxhci9zcmMvd2VicGFjay9jb25maWdzL2FuYWx5dGljcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7Ozs7OztHQU1HOzs7QUFLSCxvREFBOEQ7QUFFOUQsU0FBZ0Isa0JBQWtCLENBQ2hDLEdBQXlCLEVBQ3pCLE9BQXVCO0lBRXZCLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFO1FBQ3RCLE9BQU8sRUFBRSxDQUFDO0tBQ1g7SUFFRCxrRkFBa0Y7SUFDbEYsSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDO0lBQ3ZCLElBQUksT0FBTyxDQUFDLE9BQU8sRUFBRTtRQUNuQiwwRkFBMEY7UUFDMUYsUUFBUSxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsSUFBSSxPQUFPLENBQUM7S0FDaEc7SUFFRCwrREFBK0Q7SUFDL0QsT0FBTztRQUNMLE9BQU8sRUFBRSxDQUFDLElBQUksa0NBQXNCLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxPQUFPLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxDQUFDO0tBQ3BGLENBQUM7QUFDSixDQUFDO0FBbkJELGdEQW1CQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuXG5pbXBvcnQgeyBCdWlsZGVyQ29udGV4dCB9IGZyb20gJ0Bhbmd1bGFyLWRldmtpdC9hcmNoaXRlY3QnO1xuaW1wb3J0IHsgQ29uZmlndXJhdGlvbiB9IGZyb20gJ3dlYnBhY2snO1xuaW1wb3J0IHsgV2VicGFja0NvbmZpZ09wdGlvbnMgfSBmcm9tICcuLi8uLi91dGlscy9idWlsZC1vcHRpb25zJztcbmltcG9ydCB7IE5nQnVpbGRBbmFseXRpY3NQbHVnaW4gfSBmcm9tICcuLi9wbHVnaW5zL2FuYWx5dGljcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRBbmFseXRpY3NDb25maWcoXG4gIHdjbzogV2VicGFja0NvbmZpZ09wdGlvbnMsXG4gIGNvbnRleHQ6IEJ1aWxkZXJDb250ZXh0LFxuKTogQ29uZmlndXJhdGlvbiB7XG4gIGlmICghY29udGV4dC5hbmFseXRpY3MpIHtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICAvLyBJZiB0aGVyZSdzIGFuYWx5dGljcywgYWRkIG91ciBwbHVnaW4uIE90aGVyd2lzZSBubyBuZWVkIHRvIHNsb3cgZG93biB0aGUgYnVpbGQuXG4gIGxldCBjYXRlZ29yeSA9ICdidWlsZCc7XG4gIGlmIChjb250ZXh0LmJ1aWxkZXIpIHtcbiAgICAvLyBXZSBhbHJlYWR5IHZldHRlZCB0aGF0IHRoaXMgaXMgYSBcInNhZmVcIiBwYWNrYWdlLCBvdGhlcndpc2UgdGhlIGFuYWx5dGljcyB3b3VsZCBiZSBub29wLlxuICAgIGNhdGVnb3J5ID0gY29udGV4dC5idWlsZGVyLmJ1aWxkZXJOYW1lLnNwbGl0KCc6JylbMV0gfHwgY29udGV4dC5idWlsZGVyLmJ1aWxkZXJOYW1lIHx8ICdidWlsZCc7XG4gIH1cblxuICAvLyBUaGUgY2F0ZWdvcnkgaXMgdGhlIGJ1aWxkZXIgbmFtZSBpZiBpdCdzIGFuIGFuZ3VsYXIgYnVpbGRlci5cbiAgcmV0dXJuIHtcbiAgICBwbHVnaW5zOiBbbmV3IE5nQnVpbGRBbmFseXRpY3NQbHVnaW4od2NvLnByb2plY3RSb290LCBjb250ZXh0LmFuYWx5dGljcywgY2F0ZWdvcnkpXSxcbiAgfTtcbn1cbiJdfQ==